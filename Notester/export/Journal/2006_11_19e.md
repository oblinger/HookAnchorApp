# Journal.2006\_11\_19e --

    somehow this didn't send on sat morning :-( 
     
     
    Ok neen get the @#$# problem out of my head! 
    I don't know if I was dreaming about it, but I woke up and realized that I am thinking about this proof... 
     
    Somthing about your idea of an epsilon net has me thinking. 
    I want something like your an epsilon net, but one that limits how much the distribution can shift around. 
     
    So lets make one.  The wishful thinking lemma (WTL) states that after k samples from a distribution D,  
    the domain of D can be covered by a set of less than M sized hyper spheres such that the total 
    under estimation for the set is less than some fraction R with confidence delta where k is poly in M, delta, and R. 
     
    Lets make this under-estimation stuff formal: 
    A sphere, C, is under estimated by a k-sampling if the fraction of the k points in C is less than P(x in C | x drawn from D). 
    (i.e. the sample probablility of being in C is less than the true probability of being in C). 
    So, the fractional under-estimation for a k-sample over a set of spheres C1, ..., Cn is the  
    sum of the differences between the sample and true means for the spheres C1,...,Cn. 
    Let CUT(x)=x if x>0 else CUT(x)=0. 
     
    Under(<<>>, k-sample, D)  =  Sum_<<>>  CUT(  P(x in c | x from D) -  |k in c| <<>> |k| ) 
     
    Now our WTL can be formally stated as: 
    Given an M, delta, and R between 0 and 1, every k-sample of our distribution D where k is greater than some poly 
    of M, delta, and R there will exists a covering set c1,...,cn of less than M diamater spheres such 
    that:     Under(<<>>, k-sample, D) < R     with probability greater than 1-delta. 
     
     
     
    Now suppose that WTL is true, and let S be our subsample of S* as we discussed by phone. 
    Let <<>> be the optimal partitioning of our S, and let Pb be the biggest cell in Pi (the one driving 
    our max in our cell metric) 
     
    Rember: EPD(Pi) = Sum_<<>> dist(x,y) * p(x|Pi) * p(y|Pi) 
                       Bigness(<<>>) = max EPD(Pi) 
     
    According to WTL there is a cover C1,...,Cn of Pb whose under is less than R 
    Now in the worst case: 
    #1) the points in S will land in each sphere Ci in a way that minimizes EPD(Pb), but 
    #2) the points in S* that land in Ci will shift the distribution within Ci in a way that maximizes EPD(Pi) 
    #3) Further the under-estimated fraction of the distribution will all occur in Pb, and it will occur in 
           the worst possible places (on the edges of Pb where the increase to EPD(Pb) will be maximized). 
     
    Now we want to show that EPD(S*) < EPD(s) * (1+epsilon). 
    First lets consider the increase in EPD that can occur because of under estimation of some cells in Ci. 
    In the worst case Pb has a very large diameter (but the subsample was sparse at its edges so it EPD was not too big), 
    but all of the under-estimation occurred in at those sparse edges (oops).  How bad can it be? 
    Well the diameter of Pb must be less than MaxDiamater, and P(Pi) < 1 so with a bit of twiddeling 
    i think we can show that the under-estimated distribution can increase EPD by no more than R*maxDiameter. 
    so by choosing R = epsilon/maxDiameter/2 we see that effect #3 can contribute and increase of at most epsilon/2 
    to EPD. 
     
    Now how much can effects #1 and #2 increase EPD?   
    Well here we assume that P(Ci | S) = P(Ci | S*) for all Ci, but that the probability is shifted around within the sphere.   
    Now consider the contribution of points from two abitrarily chosen spheres: Ca and Cb. 
    Let EPD(S, Ca, Cb) = Sum_<<>> dist(a,b) * P(a|S) * P(b|S).   Note: EPD(S) = Sum EPD(S, *, *) 
     
    Note than since we are fixing P(Ca) and P(Cb) we know that for any set of points Z,  EPD( Z , Ca, Cb)  
    can never be less than minDist * P(Ca) * P(Cb) and can never be more than maxDist * P(Ca) * P(Cb) 
    where minDist and maxDist are min and max values for the dist(a,b) a in Ca and b in Cb. 
    But since Ca and Cb both have bounded diameters M, we see that maxDist <= minDist + 2M assuming 
    that dist is a function that respect the triangle inequality. 
     
    But this means that EPD(S*, Ca, Cb) <= 2M + EPD(S, Ca, Cb) for all Ca & Cb,  so by tedious twiddling we get 
    EPD( S*  in Pb) and EPD( S  in Pb) to be less than 2M. 
     
    Thus we can choose our M above to be epsilon/4 so that the contribution because of effects #1 & #2 can be no 
    greater than epsilon/2.  Therefore the total contribution of effect #1,2,3 < epsilon with prob delta.   very very weak QED. 
     
    My intuition says that this hand-wavy piece of tripe might actually be vaguely related to a proof along the 
    same lines, asssuming that my wishful-thinking-lemma is true. 
     
    I worry that WTL may not be true because it will depend on the number of M-spheres it takes to cover Pi, and that 
    this number may grow exponentially in the dimensionality of our points. 
     
    A related wishful thought might seek to find a bounded number of M-spheres that did not cover all of Pi but instead 
    covered some specified fraction of the pdf with probability 1-delta.  the number of these spheres would not 
    need to grow so large, but this complicates the proof above because we need to bound the damage that points 
    not in any sphere can cause.  (actually this does seem possible). 
     
    Anyway.  I'm gonna quit now, because all of this is for nought if in fact these wishful - thinking - lemmas are simply that. 
    Your the expert.  do these lemmas look true?  do you know of any related results? 
     
    its now 5:39am and I gonna see if this proof will go away now.... 
     
    nighty night. 
     
    -d 
     
