# HookAnchor Default Configuration
# Copy this file to ~/.config/hookanchor/config.yaml and customize as needed

# =================================================================
# APPLICATION SETTINGS
# =================================================================
popup_settings:
  max_rows: 15
  max_columns: 3
  debug_log: "~/.config/hookanchor/anchor.log"  # Debug logging file path
  debug_scanner: false
  merge_similar: true         # Merging similar commands in popup
  word_separators: " ._-"     # Word separator chars submenus and merging
  scan_interval_seconds: 3600 # Seconds between automatic filesystem scans
  # Command editor dropdown actions (comma-separated list)
  listed_actions: "alias,anchor,app,url,folder,cmd,chrome,safari,brave,firefox,work,notion,obs,obs_url,1pass,rewrite,doc,contact,slack,shutdown"

# Markdown file scanning roots (automatic scanning enabled)
markdown_roots:
  - "~/Documents"
  - "~/Notes"

launcher_settings:
  application_folder: "/Applications/HookAnchor.app"
  default_browser: "Google Chrome"
  work_browser: "Google Chrome Beta"
  timeout_ms: 5000
  obsidian_app_name: "Obsidian"
  obsidian_vault_name: "YourVaultName"  # CUSTOMIZE: Change to your Obsidian vault name
  obsidian_vault_path: "~/Documents"    # CUSTOMIZE: Change to your Obsidian vault path

scanner_settings:
  orphans_path: "~/Documents/HookAnchor/Orphans"  # CUSTOMIZE: Where orphan anchor files are created

# =================================================================
# KEYBOARD SHORTCUTS (Optional - uses defaults if not specified)
# =================================================================
keybindings:
  exit_app: "Escape"           # Exit the application
  navigate_down: "ArrowDown"   # Move selection down
  navigate_up: "ArrowUp"       # Move selection up
  navigate_left: "ArrowLeft"   # Move selection left (multi-column)
  navigate_right: "ArrowRight" # Move selection right (multi-column)
  execute_command: "Enter"     # Execute the selected command
  force_rescan: "Backtick"     # Force rescan of markdown files (~)
  show_folder: "Slash"         # Launch first folder matching search (=)
  start_grabber: "Plus"        # Start grabber countdown (+)
  open_editor: "Equals"        # Open command editor
  add_alias: ">"               # Add alias using current input and last executed command
  edit_active_command: "Semicolon"  # Edit currently selected command
  delete_command: "Delete"     # Delete command in editor
  cancel_editor: "Escape"      # Cancel command editor
  uninstall_app: "ctrl+shift+u" # Uninstall HookAnchor (requires confirmation)

# =================================================================
# FUNCTIONS
# =================================================================
functions:
  # === BASIC ACTIONS ===
  action_app: {fn: launch_app, name: "{{arg}}"}
  action_url: {fn: open_url, url: "{{arg}}"}
  action_folder: {fn: open_folder, path: "{{arg}}"}
  action_cmd: {fn: shell, command: "{{arg}}"}
  action_doc: {fn: open_document, path: "{{arg}}"}

# =================================================================
# GRABBER RULES
# =================================================================
grabber_rules:
  # =================================================================
  # BROWSER APPLICATIONS
  # =================================================================
  
  # Google Chrome
  - name: "Chrome Tab"
    matcher: "bundleId === 'com.google.Chrome' && props.url ? props.url : null"
    action: "url"
    
  # Safari
  - name: "Safari Tab"
    matcher: "bundleId === 'com.apple.Safari' && props.url ? props.url : null"
    action: "url"
    
  # Firefox
  - name: "Firefox Tab"
    matcher: "bundleId.includes('firefox') && props.url ? props.url : null"
    action: "url"

  # =================================================================
  # FINDER RULES
  # =================================================================
  
  # Finder anchor files (markdown files matching folder name)
  - name: "Finder Anchor"
    matcher: "bundleId === 'com.apple.finder' && props.selection && props.recommendedAction === 'anchor' ? props.selection : null"
    action: "anchor"
    group: "Files"
    
  # Finder markdown files (other markdown files)  
  - name: "Finder Markdown"
    matcher: "bundleId === 'com.apple.finder' && props.selection && props.recommendedAction === 'markdown' ? props.selection : null"
    action: "markdown"
    group: "Files"
    
  # Finder executables
  - name: "Finder Executable"
    matcher: "bundleId === 'com.apple.finder' && props.selection && props.recommendedAction === 'cmd' ? props.selection : null"
    action: "cmd"
    group: "Cmd"
    
  # Finder documents (other file types)
  - name: "Finder Document"
    matcher: "bundleId === 'com.apple.finder' && props.selection && props.recommendedAction === 'doc' ? props.selection : null"
    action: "doc"
    group: "Doc"
    
  # Finder selected folder
  - name: "Finder Selected Folder"
    matcher: "bundleId === 'com.apple.finder' && props.selection && props.recommendedAction === 'folder' ? props.selection : null"
    action: "folder"
    group: "Dir"
    
  # Finder current folder (when no selection)
  - name: "Finder Path"  
    matcher: "bundleId === 'com.apple.finder' && !props.selection && props.path ? props.path : null"
    action: "folder"
    group: "Dir"

  # =================================================================
  # CODE EDITORS
  # =================================================================
  
  # VS Code files
  - name: "VS Code File"
    matcher: "bundleId === 'com.microsoft.VSCode' && title && !title.includes('Welcome') ? title.split(' â€” ')[0] : null"
    action: "doc"
    group: "Code"

  # =================================================================
  # OBSIDIAN
  # =================================================================
  
  # Obsidian notes
  - name: "Obsidian Note"
    matcher: "bundleId === 'md.obsidian' && props.url ? props.url : null"
    action: "obs"

  # =================================================================
  # GENERIC FALLBACK
  # =================================================================
  
  # Generic application launcher (fallback)
  - name: "Application Launcher"
    matcher: "app"
    action: "app"
    group: "Apps"